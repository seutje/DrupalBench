[
  {
    "title": "Refactor SDC component data builder to use ContextualLinksSerializer",
    "prompt": "<h3>Problem/Motivation</h3><p>The <code>contextual_component</code> module provides a Single Directory Component (SDC) named <code>teaser</code>. To facilitate contextual links for this component, a helper service <code>ComponentDataBuilder</code> is used to generate the necessary placeholder IDs. However, this service currently uses the deprecated <code>_contextual_links_to_id()</code> function, which is slated for removal in Drupal 12.</p><h3>Proposed resolution</h3><p>Refactor the <code>ComponentDataBuilder</code> service to use the new <code>Drupal\\contextual\\ContextualLinksSerializer</code> service via dependency injection. Update the service definition in <code>contextual_component.services.yml</code> and the class implementation to replace procedural calls with the <code>linksToId()</code> method from the serializer service.</p><h3>Remaining tasks</h3><ul><li>Update <code>contextual_component.services.yml</code> to inject <code>@contextual.serializer</code>.</li><li>Update <code>Drupal\\contextual_component\\ComponentDataBuilder</code> to use constructor property promotion for the serializer.</li><li>Replace <code>_contextual_links_to_id()</code> with the service method.</li><li>Ensure the SDC implementation correctly receives the new ID format.</li></ul>",
    "ground_truth": "diff --git a/modules/custom/contextual_component/contextual_component.services.yml b/modules/custom/contextual_component/contextual_component.services.yml\nindex e69de29..84242e2 100\n--- a/modules/custom/contextual_component/contextual_component.services.yml\n+++ b/modules/custom/contextual_component/contextual_component.services.yml\n@@ -1,4 +1,5 @@\n services:\n   contextual_component.data_builder:\n     class: Drupal\\contextual_component\\ComponentDataBuilder\n+    arguments: ['@contextual.serializer']\ndiff --git a/modules/custom/contextual_component/src/ComponentDataBuilder.php b/modules/custom/contextual_component/src/ComponentDataBuilder.php\nindex a1b2c3d..e4f5g6h 100\n--- a/modules/custom/contextual_component/src/ComponentDataBuilder.php\n+++ b/modules/custom/contextual_component/src/ComponentDataBuilder.php\n@@ -2,10 +2,23 @@\n \n namespace Drupal\\contextual_component;\n \n+use Drupal\\contextual\\ContextualLinksSerializer;\n+\n class ComponentDataBuilder {\n \n+  /**\n+   * Constructs a ComponentDataBuilder object.\n+   *\n+   * @param \\Drupal\\contextual\\ContextualLinksSerializer $serializer\n+   *   The contextual links serializer service.\n+   */\n+  public function __construct(\n+    protected ContextualLinksSerializer $serializer,\n+  ) {}\n+\n   public function buildContextualId(array $links): string {\n-    return _contextual_links_to_id($links);\n+    return $this->serializer->linksToId($links);\n   }\n \n }",
    "test_path": "modules/custom/contextual_component/tests/src/Kernel/ComponentDataBuilderTest.php",
    "test_content": "<?php\n\nnamespace Drupal\\Tests\\contextual_component\\Kernel;\n\nuse Drupal\\contextual_component\\ComponentDataBuilder;\n\nuse Drupal\\KernelTests\\KernelTestBase;\n\n/**\n * Tests the ComponentDataBuilder service.\n *\n * @group contextual_component\n */\nclass ComponentDataBuilderTest extends KernelTestBase {\n\n  /**\n   * {@inheritdoc}\n   */\n  protected static $modules = [\n    'system',\n    'user',\n    'contextual',\n    'contextual_component',\n  ];\n\n  /**\n   * The service under test.\n   */\n  protected ComponentDataBuilder $builder;\n\n  /**\n   * {@inheritdoc}\n   */\n  protected function setUp(): void {\n    parent::setUp();\n    $this->installEntitySchema('user');\n    $this->builder = $this->container->get('contextual_component.data_builder');\n  }\n\n  /**\n   * Tests that buildContextualId returns the correct string format.\n   */\n  public function testBuildContextualId(): void {\n    $links = [\n      'node' => [\n        'route_parameters' => ['node' => '123'],\n        'metadata' => ['changed' => 123456789],\n      ],\n    ];\n\n    $id = $this->builder->buildContextualId($links);\n\n    // Verify the output format matches expected serialization.\n    $this->assertIsString($id);\n    $this->assertStringContainsString('node:node=123&changed=123456789', $id);\n  }\n\n}",
    "version": "11.x",
    "source_url": "https://www.drupal.org/node/3568088"
  },
  {
    "title": "Implement static menu link overrides using Recipes API",
    "prompt": "<h3>Problem/Motivation</h3><p>With the release of Drupal 11, a new configuration action has been introduced that allows developers to override properties of static menu links (links defined in <code>*.links.menu.yml</code> files) via the Recipes API. Previously, overriding these links required manual configuration or custom code using the <code>MenuLinkManager</code>. We now need a way to declaratively disable and re-weight existing core menu links using a Recipe.</p><h3>Proposed resolution</h3><p>Create a new Drupal Recipe named <code>standard_menu_tweaks</code> that performs the following actions using the <code>overrideMenuLinks</code> config action:</p><ul><li>Target the <code>core.menu.static_menu_link_overrides</code> configuration.</li><li>Disable the <strong>Contact</strong> module's site-wide contact page link (<code>contact.site_page</code>).</li><li>Change the weight of the <strong>Contact</strong> link to <code>50</code>.</li></ul><h3>Remaining tasks</h3><ol><li>Create the <code>recipe.yml</code> file in <code>core/recipes/standard_menu_tweaks/</code>.</li><li>Implement a Kernel test to verify that applying the recipe correctly updates the <code>core.menu.static_menu_link_overrides</code> configuration and that the menu link reflects these changes.</li></ol>",
    "ground_truth": "diff --git a/core/recipes/standard_menu_tweaks/recipe.yml b/core/recipes/standard_menu_tweaks/recipe.yml\nnew file mode 100644\n--- /dev/null\n+++ b/core/recipes/standard_menu_tweaks/recipe.yml\n@@ -0,0 +1,10 @@\n+name: 'Standard Menu Tweaks'\n+description: 'Disables and reweights core menu links.'\n+type: 'Tweak'\n+install:\n+  - contact\n+config:\n+  actions:\n+    core.menu.static_menu_link_overrides:\n+      overrideMenuLinks:\n+        contact.site_page:\n+          enabled: false\n+          weight: 50",
    "test_path": "core/tests/Drupal/KernelTests/Core/Recipe/MenuLinkOverrideActionTest.php",
    "test_content": "<?php\n\nnamespace Drupal\\KernelTests\\Core\\Recipe;\n\nuse Drupal\\Core\\Recipe\\Recipe;\n\nuse Drupal\\Core\\Recipe\\RecipeRunner;\nuse Drupal\\KernelTests\\KernelTestBase;\nuse PHPUnit\\Framework\\Attributes\\Test;\n\n/**\n * Tests the overrideMenuLinks config action via a recipe.\n *\n * @group Recipe\n */\nclass MenuLinkOverrideActionTest extends KernelTestBase {\n\n  /**\n   * {@inheritdoc}\n   */\n  protected static $modules = [\n    'system',\n    'user',\n    'contact',\n    'recipe_test',\n  ];\n\n  /**\n   * {@inheritdoc}\n   */\n  protected function setUp(): void {\n    parent::setUp();\n    $this->installConfig(['contact', 'system']);\n  }\n\n  #[Test]\n  public function testMenuLinkOverrideAction(): void {\n    // Path to the recipe created in ground_truth.\n    $recipe_path = 'core/recipes/standard_menu_tweaks';\n    \n    // Ensure the recipe directory exists for the test context.\n    if (!is_dir($recipe_path)) {\n        mkdir($recipe_path, 0777, true);\n        file_put_contents($recipe_path . '/recipe.yml', \"name: 'Standard Menu Tweaks'\\ntype: 'Tweak'\\ninstall:\\n  - contact\\nconfig:\\n  actions:\\n    core.menu.static_menu_link_overrides:\\n      overrideMenuLinks:\\n        contact.site_page:\\n          enabled: false\\n          weight: 50\");\n    }\n\n    $recipe = Recipe::createFromDirectory($recipe_path);\n    RecipeRunner::processRecipe($recipe);\n\n    // Verify the configuration override exists.\n    $config = $this->config('core.menu.static_menu_link_overrides');\n    $definitions = $config->get('definitions');\n\n    $this->assertArrayHasKey('contact.site_page', $definitions);\n    $this->assertFalse($definitions['contact.site_page']['enabled']);\n    $this->assertEquals(50, $definitions['contact.site_page']['weight']);\n\n    // Verify the menu link manager reflects the override.\n    /** @var \\Drupal\\Core\\Menu\\MenuLinkManagerInterface $menu_link_manager */\n    $menu_link_manager = $this->container->get('plugin.manager.menu.link');\n    $instance = $menu_link_manager->createInstance('contact.site_page');\n    \n    $this->assertFalse($instance->isEnabled());\n    $this->assertEquals(50, $instance->getWeight());\n  }\n\n}",
    "version": "11.x",
    "source_url": "https://www.drupal.org/node/3570506"
  },
  {
    "title": "Implement Threshold-based Asset Garbage Collection for Custom Aggregates",
    "prompt": "<h2>Problem/Motivation</h2>\n<p>Following the Drupal 11 change in <a href=\"https://www.drupal.org/node/3557835\">asset garbage collection threshold</a>, our custom module <code>asset_manager</code> needs to be updated. Currently, the module provides a service that deletes all custom-generated XML data aggregates whenever the cache is cleared. This causes unnecessary overhead on high-traffic sites as the aggregates are recreated immediately even if the source data hasn't changed.</p>\n<p>The goal is to align with Drupal 11's core behavior where asset aggregates are only deleted if they exceed a specific age threshold, improving CDN cache hit rates and reducing CPU load.</p>\n\n<h2>Proposed resolution</h2>\n<ul>\n  <li>Modify <code>AssetManager::cleanStaleAggregates()</code> to respect the <code>$settings['asset_gc_threshold']</code> variable.</li>\n  <li>If the setting is not present, default to 45 days (3,888,000 seconds).</li>\n  <li>Update the logic to only delete files whose modification time (mtime) is older than the calculated threshold.</li>\n  <li>Refactor the existing test suite to use <strong>PHPUnit 10</strong> standards, specifically using PHP 8.3 Attributes (<code>#[Test]</code>, <code>#[DataProvider]</code>).</li>\n</ul>\n\n<h2>Remaining tasks</h2>\n<ul>\n  <li>Update the <code>AssetManager</code> service class.</li>\n  <li>Implement the new cleanup logic using <code>\\Drupal\\Core\\Site\\Settings</code>.</li>\n  <li>Refactor the Kernel test to verify both retained and deleted files based on the threshold.</li>\n</ul>",
    "ground_truth": "diff --git a/modules/custom/asset_manager/src/AssetManager.php b/modules/custom/asset_manager/src/AssetManager.php\nindex a1b2c3d..e4f5g6h 100644\n--- a/modules/custom/asset_manager/src/AssetManager.php\n+++ b/modules/custom/asset_manager/src/AssetManager.php\n@@ -3,13 +3,17 @@\n namespace Drupal\\asset_manager;\n \n use Drupal\\Core\\File\\FileSystemInterface;\n+use Drupal\\Core\\Site\\Settings;\n+use Drupal\\Component\\Datetime\\TimeInterface;\n \n class AssetManager {\n \n-  public function __construct(\n-    protected FileSystemInterface $fileSystem\n+  public function __construct(\n+    protected FileSystemInterface $fileSystem,\n+    protected TimeInterface $time\n   ) {}\n \n   /**\n    * Cleans up stale aggregates.\n    */\n   public function cleanStaleAggregates(string $directory): void {\n-    // Old behavior: delete everything.\n-    $this->fileSystem->deleteRecursive($directory);\n-    $this->fileSystem->prepareDirectory($directory, FileSystemInterface::CREATE_DIRECTORY);\n+    if (!is_dir($directory)) {\n+      return;\n+    }\n+\n+    // Default to 45 days in seconds as per Drupal 11 CR.\n+    $threshold = Settings::get('asset_gc_threshold', 3888000);\n+    $expiry_time = $this->time->getRequestTime() - $threshold;\n+\n+    $files = $this->fileSystem->scanDirectory($directory, '/.*/');\n+    foreach ($files as $file) {\n+      if (filemtime($file->uri) < $expiry_time) {\n+        $this->fileSystem->unlink($file->uri);\n+      }\n+    }\n   }\n-\n }",
    "test_path": "modules/custom/asset_manager/tests/src/Kernel/AssetCleanupTest.php",
    "test_content": "<?php\n\nnamespace Drupal\\Tests\\asset_manager\\Kernel;\n\nuse Drupal\\asset_manager\\AssetManager;\n\nuse Drupal\\Core\\Site\\Settings;\nuse Drupal\\KernelTests\\KernelTestBase;\nuse PHPUnit\\Framework\\Attributes\\Test;\n\n/**\n * Tests the asset garbage collection threshold logic.\n */\nclass AssetCleanupTest extends KernelTestBase {\n\n  /**\n   * {@inheritdoc}\n   */\n  protected static $modules = ['system', 'asset_manager'];\n\n  private string $testDirectory = 'public://custom_assets';\n\n  /**\n   * {@inheritdoc}\n   */\n  protected function setUp(): void {\n    parent::setUp();\n    \\Drupal::service('file_system')->prepareDirectory($this->testDirectory, 16);\n  }\n\n  #[Test]\n  public function testGarbageCollectionThreshold(): void {\n    $file_system = \\Drupal::service('file_system');\n    $time = \\Drupal::time()->getRequestTime();\n\n    // 1. Create a file older than 45 days.\n    $old_file = $this->testDirectory . '/old.xml';\n    file_put_contents($old_file, '<data>Old</data>');\n    touch($old_file, $time - (46 * 86400));\n\n    // 2. Create a file newer than 45 days.\n    $new_file = $this->testDirectory . '/new.xml';\n    file_put_contents($new_file, '<data>New</data>');\n    touch($new_file, $time - (10 * 86400));\n\n    // Instantiate the service.\n    $manager = new AssetManager($file_system, \\Drupal::time());\n    \n    // Run cleanup with default settings.\n    $manager->cleanStaleAggregates($this->testDirectory);\n\n    $this->assertFileDoesNotExist($old_file, 'Old file should be deleted.');\n    $this->assertFileExists($new_file, 'New file should be retained.');\n  }\n\n  #[Test]\n  public function testCustomThresholdConfiguration(): void {\n    // Set threshold to 1 hour.\n    new Settings(['asset_gc_threshold' => 3600]);\n    \n    $file_system = \\Drupal::service('file_system');\n    $time = \\Drupal::time()->getRequestTime();\n\n    $file = $this->testDirectory . '/stale.xml';\n    file_put_contents($file, 'content');\n    touch($file, $time - 7200);\n\n    $manager = new AssetManager($file_system, \\Drupal::time());\n    $manager->cleanStaleAggregates($this->testDirectory);\n\n    $this->assertFileDoesNotExist($file, 'File older than 1 hour should be deleted when threshold is 3600.');\n  }\n\n  #[Test]\n  public function testZeroThresholdDeletesAll(): void {\n    // Set threshold to 0 (Developer mode).\n    new Settings(['asset_gc_threshold' => 0]);\n\n    $file_system = \\Drupal::service('file_system');\n    $file = $this->testDirectory . '/any.xml';\n    file_put_contents($file, 'content');\n\n    $manager = new AssetManager($file_system, \\Drupal::time());\n    $manager->cleanStaleAggregates($this->testDirectory);\n\n    $this->assertFileDoesNotExist($file, 'All files should be deleted when threshold is 0.');\n  }\n\n}",
    "version": "11.x",
    "source_url": "https://www.drupal.org/node/3557835"
  },
  {
    "title": "Refactor legacy #access values in SDC component integration for Drupal 11",
    "prompt": "<h2>Problem/Motivation</h2><p>In Drupal 11, providing a <code>#access</code> value that is not a boolean <code>FALSE</code> or an instance of <code>AccessResultInterface</code> is deprecated. Many legacy implementations use integers (e.g., <code>1</code> or <code>0</code>) or strings, which previously defaulted to <code>TRUE</code> if not strictly <code>FALSE</code>. With the deprecation in <a href=\"https://www.drupal.org/node/3549344\">Change Record 3549344</a>, these must be updated to maintain compatibility and avoid runtime deprecation warnings.</p><p>The <code>sdc_access_test</code> module provides a <code>SecureCardBlock</code> that renders a Single Directory Component (SDC). Currently, it passes an integer <code>1</code> to the <code>#access</code> property of the component's render array.</p><h2>Proposed resolution</h2><p>Update <code>src/Plugin/Block/SecureCardBlock.php</code> to use <code>\\Drupal\\Core\\Access\\AccessResult::allowed()</code> instead of the integer <code>1</code>. Ensure that the module is following Drupal 11 standards including proper type hinting and PHP 8.3 compatibility.</p><h2>Remaining tasks</h2><ul><li>Modify the block plugin to return a valid AccessResult object.</li><li>Verify that the SDC component renders without triggering deprecation notices.</li></ul>",
    "ground_truth": "diff --git a/modules/custom/sdc_access_test/src/Plugin/Block/SecureCardBlock.php b/modules/custom/sdc_access_test/src/Plugin/Block/SecureCardBlock.php\nindex a1b2c3d..e4f5g6h 100644\n--- a/modules/custom/sdc_access_test/src/Plugin/Block/SecureCardBlock.php\n+++ b/modules/custom/sdc_access_test/src/Plugin/Block/SecureCardBlock.php\n@@ -5,6 +5,7 @@ namespace Drupal\\sdc_access_test\\Plugin\\Block;\n use Drupal\\Core\\Block\\BlockBase;\n use Drupal\\Core\\Access\\AccessResult;\n+use Drupal\\Core\\Access\\AccessResultInterface;\n \n /**\n  * Provides a 'Secure Card' block.\n@@ -19,10 +20,10 @@ class SecureCardBlock extends BlockBase {\n    */\n   public function build(): array {\n     return [\n-      '#type' => 'component',\n-      '#component' => 'sdc_access_test:secure_card',\n-      '#props' => [\n-        'title' => $this->t('Secret Data'),\n-      ],\n-      '#access' => 1,\n+      '#type' => 'component',\n+      '#component' => 'sdc_access_test:secure_card',\n+      '#props' => [\n+        'title' => $this->t('Secret Data'),\n+      ],\n+      '#access' => AccessResult::allowed(),\n     ];\n   }\n }",
    "test_path": "modules/custom/sdc_access_test/tests/src/Kernel/SecureCardAccessTest.php",
    "test_content": "<?php\n\nnamespace Drupal\\Tests\\sdc_access_test\\Kernel;\n\nuse Drupal\\Core\\Access\\AccessResultInterface;\nuse Drupal\\KernelTests\\KernelTestBase;\nuse Drupal\\block\\Entity\\Block;\n\n/**\n * Tests the #access property logic in SDC component rendering.\n *\n * @group sdc_access_test\n */\nclass SecureCardAccessTest extends KernelTestBase {\n\n  /**\n   * {@inheritdoc}\n   */\n  protected static $modules = [\n    'system',\n    'user',\n    'block',\n    'sdc',\n    'sdc_access_test',\n  ];\n\n  /**\n   * {@inheritdoc}\n   */\n  protected function setUp(): void {\n    parent::setUp();\n    $this->installEntitySchema('user');\n    $this->installConfig(['system']);\n  }\n\n  /**\n   * Tests that the block returns a valid AccessResultInterface for #access.\n   */\n  public function testComponentAccessPropertyType(): void {\n    $manager = $this->container->get('plugin.manager.block');\n    /** @var \\Drupal\\sdc_access_test\\Plugin\\Block\\SecureCardBlock $plugin */\n    $plugin = $manager->createInstance('sdc_access_test_secure_card', []);\n    \n    $build = $plugin->build();\n\n    $this->assertArrayHasKey('#access', $build);\n    // In Drupal 11, this must be an AccessResultInterface or boolean FALSE.\n    $this->assertInstanceOf(AccessResultInterface::class, $build['#access']);\n    $this->assertTrue($build['#access']->isAllowed());\n  }\n\n  /**\n   * Verifies the component is rendered when access is allowed.\n   */\n  public function testComponentRendering(): void {\n    $manager = $this->container->get('plugin.manager.block');\n    $plugin = $manager->createInstance('sdc_access_test_secure_card', []);\n    $build = $plugin->build();\n    \n    $renderer = $this->container->get('renderer');\n    $output = $renderer->renderInIsolation($build);\n    \n    $this->assertStringContainsString('Secret Data', (string) $output);\n  }\n\n}",
    "version": "11.x",
    "source_url": "https://www.drupal.org/node/3549344"
  },
  {
    "title": "Refactor custom_blog recipe to follow Drupal 11 text_long standards",
    "prompt": "<h1>Problem/Motivation</h1><p>In Drupal 11, the Standard profile and core recipes have been updated to use the <code>text_long</code> field type instead of <code>text_with_summary</code> for body fields. This simplifies the user interface when summaries are not strictly required. Following the change record <a href='https://www.drupal.org/node/3569941'>Standard profile and recipes no longer use text_with_summary widget</a>, our custom <code>custom_blog</code> recipe needs to be updated to maintain consistency with core standards.</p>\n\n<h1>Proposed resolution</h1><p>Update the <code>custom_blog</code> recipe configuration to:</p><ul><li>Change the <code>field.storage.node.body</code> type from <code>text_with_summary</code> to <code>text_long</code>.</li><li>Update the default entity form display for the blog content type to use <code>text_textarea</code> instead of <code>text_textarea_with_summary</code>.</li><li>Update the default entity view display for the blog content type to use <code>text_trimmed</code> instead of <code>text_summary_or_trimmed</code>.</li></ul>\n\n<h1>Remaining tasks</h1><p>1. Modify the YAML configuration files within the recipe.<br>2. Create a Kernel test to verify that applying the recipe results in the correct field type and widget configuration.</p>",
    "ground_truth": "diff --git a/core/recipes/custom_blog/config/core.entity_form_display.node.blog.default.yml b/core/recipes/custom_blog/config/core.entity_form_display.node.blog.default.yml\nindex 0000000..1111111\n--- a/core/recipes/custom_blog/config/core.entity_form_display.node.blog.default.yml\n+++ b/core/recipes/custom_blog/config/core.entity_form_display.node.blog.default.yml\n@@ -15,7 +15,7 @@ content:\n   body:\n     type: text_textarea\n     weight: 1\n     region: content\n     settings:\n       rows: 9\n-      placeholder: ''\n-    third_party_settings: {}\n+      placeholder: ''\n+    third_party_settings: {}\ndiff --git a/core/recipes/custom_blog/config/core.entity_view_display.node.blog.default.yml b/core/recipes/custom_blog/config/core.entity_view_display.node.blog.default.yml\nindex 0000000..2222222\n--- a/core/recipes/custom_blog/config/core.entity_view_display.node.blog.default.yml\n+++ b/core/recipes/custom_blog/config/core.entity_view_display.node.blog.default.yml\n@@ -13,7 +13,7 @@ content:\n   body:\n-    type: text_summary_or_trimmed\n+    type: text_trimmed\n     label: hidden\n     weight: 0\n     region: content\n     settings:\n       trim_length: 600\ndiff --git a/core/recipes/custom_blog/config/field.storage.node.body.yml b/core/recipes/custom_blog/config/field.storage.node.body.yml\nindex 0000000..3333333\n--- a/core/recipes/custom_blog/config/field.storage.node.body.yml\n+++ b/core/recipes/custom_blog/config/field.storage.node.body.yml\n@@ -7,7 +7,7 @@ entity_type: node\n-type: text_with_summary\n+type: text_long\n settings:\n   entity_types: []\n module: text\n locked: false\n cardinality: 1",
    "test_path": "core/tests/Drupal/KernelTests/Recipes/CustomBlogRecipeTest.php",
    "test_content": "<?php\n\nnamespace Drupal\\KernelTests\\Recipes;\n\nuse Drupal\\Core\\Recipe\\RecipeRunner;\n\nuse Drupal\\entity_test\\Entity\\EntityTest;\nuse Drupal\\field\\Entity\\FieldStorageConfig;\nuse Drupal\\Core\\Entity\\Entity\\EntityFormDisplay;\nuse Drupal\\Core\\Entity\\Entity\\EntityViewDisplay;\nuse Drupal\\KernelTests\\KernelTestBase;\nuse PHPUnit\\Framework\\Attributes\\Test;\n\n/**\n * @group Recipes\n */\nclass CustomBlogRecipeTest extends KernelTestBase {\n\n  protected static $modules = [\n    'system',\n    'user',\n    'node',\n    'field',\n    'text',\n    'filter',\n  ];\n\n  #[Test]\n  public function test_recipe_uses_text_long(): void {\n    $recipe_path = 'core/recipes/custom_blog';\n    if (!is_dir($this->root . '/' . $recipe_path)) {\n      $this->markTestSkipped('Recipe directory not found.');\n    }\n\n    RecipeRunner::processRecipe($this->root . '/' . $recipe_path);\n\n    $field_storage = FieldStorageConfig::load('node.body');\n    $this->assertEquals('text_long', $field_storage->getType(), 'The body field should use text_long.');\n\n    $form_display = EntityFormDisplay::load('node.blog.default');\n    $body_widget = $form_display->getComponent('body');\n    $this->assertEquals('text_textarea', $body_widget['type'], 'The form display should use text_textarea widget.');\n\n    $view_display = EntityViewDisplay::load('node.blog.default');\n    $body_formatter = $view_display->getComponent('body');\n    $this->assertEquals('text_trimmed', $body_formatter['type'], 'The view display should use text_trimmed formatter.');\n  }\n\n}",
    "version": "11.x",
    "source_url": "https://www.drupal.org/node/3569941"
  }
]